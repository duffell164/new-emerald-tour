<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Emerald Tour Leaderboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
        
        .leaderboard-container {
            max-width: 1300px;
            margin: 0 auto;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            overflow: hidden; /* Keeps header from scrolling */
        }

        /* FIXED HEADER SECTION */
        .header {
            background: linear-gradient(135deg, #124d12 0%, #228B22 50%, #1a5e1a 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
            font-size: 24px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 4px solid #FFD700;
            position: relative;
        }
        .header img { height: 45px; vertical-align: middle; }
        .logo-left { margin-right: 20px; }
        .logo-right { margin-left: 20px; }

        .info-bar { display: flex; justify-content: space-around; background: #333; color: #ddd; padding: 12px; font-size: 14px; }
        .info-item { font-weight: bold; color: #FFD700; }
        .info-item span { color: white; margin-left: 5px; }

        .venue { background: #444; color: #FFFFF7; padding: 12px; text-align: center; font-size: 18px; font-weight: bold; }
        .venue.major { background: linear-gradient(90deg, #8B6914 0%, #FFD700 50%, #8B6914 100%) !important; color: #000 !important; }

        /* SCROLLABLE TABLE SECTION */
        .table-wrapper {
            width: 100%;
            overflow-x: auto; /* This enables the horizontal swipe */
            -webkit-overflow-scrolling: touch;
        }

        table { width: 100%; border-collapse: collapse; min-width: 900px; } /* Min-width forces scroll on small screens */
        th { background-color: #e6e6e6; padding: 12px; text-align: left; font-size: 13px; border-bottom: 2px solid #ddd; color: #444; }
        td { padding: 10px 12px; border-bottom: 1px solid #eee; font-size: 15px; }

        .pos { font-weight: bold; width: 50px; text-align: center; background: #f9f9f9; }
        .player-name { font-weight: 600; color: #1a5e1a; }
        .to-par { font-weight: bold; text-align: center; font-size: 16px; width: 80px; }
        .to-par.under { color: #d32f2f; }
        .to-par.even { color: #2e7d32; }
        .round-score { text-align: center; width: 60px; color: #666; }
        .total { font-weight: bold; text-align: center; width: 70px; background: #fcfcfc; }
        .prize { font-weight: bold; text-align: center; color: #124d12; width: 110px; }

        /* BONUS & HOF SECTIONS */
        .bonus-container, .hof-container { padding: 20px; }
        .section-title { background: #eee; padding: 10px; font-weight: bold; margin-top: 20px; border-radius: 4px; }
        .hof-cards { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 15px; }
        .hof-card { background: #1a1a1a; color: white; padding: 15px; border-radius: 8px; text-align: center; width: 180px; border: 1px solid #FFD700; }
        
        @media (max-width: 600px) {
            .header { font-size: 18px; padding: 20px 10px; }
            .header img { height: 30px; }
        }
    </style>
</head>
<body>

<div class="leaderboard-container">
    <div class="header">
        <img src="2k25 logo.png" class="logo-left" alt="">
        EMERALD TOUR LEADERBOARD
        <img src="FedEx-Cup-logo.png" class="logo-right" alt="">
    </div>

    <div class="info-bar">
        <div class="info-item">Date: <span id="date-field">--</span></div>
        <div class="info-item">Par: <span id="course-par">72</span></div>
        <div class="info-item">Purse: <span id="prize-pool">$500,000</span></div>
    </div>

    <div class="venue" id="venue-field">The Old Oaks Club</div>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th class="pos">POS</th>
                    <th>PLAYER</th>
                    <th class="to-par">TO PAR</th>
                    <th class="round-score">R1</th>
                    <th class="round-score">R2</th>
                    <th class="round-score">R3</th>
                    <th class="round-score">R4</th>
                    <th class="total">TOTAL</th>
                    <th class="prize">PRIZE</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                </tbody>
        </table>
    </div>

    <div class="section-title">SEASON STATS</div>
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>PLAYER</th>
                    <th>POINTS</th>
                    <th>EARNINGS</th>
                    <th>EVENTS</th>
                    <th>FiR %</th>
                    <th>GiR %</th>
                    <th>SCRAM %</th>
                </tr>
            </thead>
            <tbody id="bonus-body"></tbody>
        </table>
    </div>

    <div class="hof-container">
        <div class="section-title" style="text-align:center; color:#124d12;">üèÜ SEASON TOP 3 üèÜ</div>
        <div class="hof-cards" id="hof-display"></div>
    </div>
</div>

<script>
    // PASTE YOUR LINK BELOW
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSoGXmOEYNiMsVMIlQv-PCbb_rMZibcL8t1nhjgwUeT-Fi35kBGD6ED81g7zQEsa726jVI7jax5Tvbx/pub?output=csv';
    const GID_LEADERBOARD = '&gid=0';
    const GID_STATS = '&gid=349486530'; // Update with your Stats Tab GID

    async function loadData() {
        try {
            const res = await fetch(CSV_URL + GID_LB);
            const text = await res.text();
            renderLB(text);

            const statRes = await fetch(CSV_URL + GID_STATS);
            const statText = await statRes.text();
            renderStats(statText);
        } catch (e) { console.error("Error:", e); }
    }

    function renderLB(csv) {
        const rows = csv.split('\n').slice(1);
        const tbody = document.getElementById('leaderboard-body');
        tbody.innerHTML = '';

        rows.forEach((row, idx) => {
            const col = row.split(',');
            if (!col[1]) return;

            const scores = [col[3], col[4], col[5], col[6]].map(s => parseInt(s) || 0);
            const valid = scores.filter(s => s > 0);
            const total = valid.reduce((a, b) => a + b, 0);
            const par = parseInt(document.getElementById('course-par').textContent) || 72;
            const toPar = valid.length > 0 ? total - (par * valid.length) : null;
            const toParText = toPar === null ? '-' : (toPar === 0 ? 'E' : (toPar > 0 ? '+' + toPar : toPar));

            tbody.innerHTML += `
                <tr>
                    <td class="pos">${idx + 1}</td>
                    <td class="player-name">${col[1]}</td>
                    <td class="to-par ${toPar < 0 ? 'under' : 'even'}">${toParText}</td>
                    <td class="round-score">${col[3] || '-'}</td>
                    <td class="round-score">${col[4] || '-'}</td>
                    <td class="round-score">${col[5] || '-'}</td>
                    <td class="round-score">${col[6] || '-'}</td>
                    <td class="total">${total || '-'}</td>
                    <td class="prize">${col[8] || '$0'}</td>
                </tr>
            `;
        });
    }

    function renderStats(csv) {
        const rows = csv.split('\n').slice(1);
        const tbody = document.getElementById('bonus-body');
        const hof = document.getElementById('hof-display');
        tbody.innerHTML = '';
        hof.innerHTML = '';

        rows.forEach((row, i) => {
            const col = row.split(',');
            if (!col[0]) return;

            tbody.innerHTML += `
                <tr>
                    <td>${col[0]}</td><td>${col[1]}</td><td>$${col[2]}</td><td>${col[3]}</td>
                    <td>${col[4]}%</td><td>${col[5]}%</td><td>${col[6]}%</td>
                </tr>
            `;

            if (i < 3) {
                const medals = ['ü•á', 'ü•à', 'ü•â'];
                hof.innerHTML += `
                    <div class="hof-card">
                        <div style="font-size:30px;">${medals[i]}</div>
                        <div style="font-weight:bold; margin: 5px 0;">${col[0]}</div>
                        <div style="color:#FFD700; font-size:12px;">${col[1]} Points</div>
                    </div>
                `;
            }
        });
    }

    window.onload = loadData;
</script>

</body>
</html>



